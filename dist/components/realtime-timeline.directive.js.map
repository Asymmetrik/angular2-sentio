{"version":3,"sources":["components/realtime-timeline.directive.ts"],"names":[],"mappings":"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","file":"realtime-timeline.directive.js","sourcesContent":["import { Directive, ElementRef, EventEmitter, HostListener, Input, OnChanges, SimpleChange, Output } from '@angular/core';\nimport * as sentio from '@asymmetrik/sentio';\n\nimport { BaseChartDirective } from './base-chart.directive';\n\n\n@Directive({\n\tselector: 'realtime-timeline'\n})\nexport class RealtimeTimelineDirective\n\textends BaseChartDirective\n\timplements OnChanges {\n\n\t@Input() model: Object[];\n\t@Input() markers: Object[];\n\t@Input() yExtent: Object[];\n\t@Input() xExtent: Object[];\n\t@Input() delay: number;\n\t@Input() fps: number;\n\t@Input() interval: number;\n\n\t@Input() resizeWidth: boolean;\n\t@Input() resizeHeight: boolean;\n\t@Input() duration: number;\n\n\t@Input('configure') configureFn: (chart: any) => void;\n\n\t@Output() markerOver: EventEmitter<Object> = new EventEmitter();\n\t@Output() markerOut: EventEmitter<Object> = new EventEmitter();\n\t@Output() markerClick: EventEmitter<Object> = new EventEmitter();\n\n\tconstructor(el: ElementRef) {\n\t\tsuper(el, sentio.realtime.timeline());\n\t}\n\n\t/**\n\t * For the timeline, both dimensions scale independently\n\t */\n\tsetChartDimensions(width: number, height: number, force: boolean = false): void {\n\t\tlet redraw: boolean = false;\n\n\t\tif ((force || this.resizeWidth) && null != this.chart.width) {\n\t\t\tif (null != width && this.chart.width() !== width) {\n\t\t\t\tthis.chart.width(width);\n\t\t\t\tredraw = true;\n\t\t\t}\n\t\t}\n\n\t\tif ((force || this.resizeHeight) && null != this.chart.height) {\n\t\t\tif (null != height && this.chart.height() !== height) {\n\t\t\t\tthis.chart.height(height);\n\t\t\t\tredraw = true;\n\t\t\t}\n\t\t}\n\n\t\tif (redraw) {\n\t\t\tthis.chart.resize().redraw();\n\t\t}\n\t}\n\n\t@HostListener('window:resize', ['$event'])\n\tonResize(event: any) {\n\t\tif (this.resizeHeight || this.resizeWidth) {\n\t\t\tthis.delayResize();\n\t\t}\n\t}\n\n\tngOnInit() {\n\t\t// Do the initial resize if either dimension is supposed to resize\n\t\tif (this.resizeHeight || this.resizeWidth) {\n\t\t\tthis.resize();\n\t\t}\n\n\t\t// register for the marker events\n\t\tthis.chart.dispatch().on('markerClick', (p: any) => { this.markerClick.emit(p); });\n\t\tthis.chart.dispatch().on('markerMouseover', (p: any) => { this.markerOver.emit(p); });\n\t\tthis.chart.dispatch().on('markerMouseout', (p: any) => { this.markerOut.emit(p); });\n\n\t}\n\n\tngOnChanges(changes: { [key: string]: SimpleChange }) {\n\n\t\tlet redraw: boolean = false;\n\n\t\t// Call the configure function\n\t\tif (changes['configureFn'] && changes['configureFn'].isFirstChange()\n\t\t\t\t&& null != changes['configureFn'].currentValue) {\n\t\t\tthis.configureFn(this.chart);\n\t\t}\n\n\t\tif (changes['model']) {\n\t\t\tthis.chart.data(changes['model'].currentValue);\n\t\t\tredraw = true;\n\t\t}\n\t\tif (changes['markers']) {\n\t\t\tthis.chart.markers(changes['markers'].currentValue);\n\t\t\tredraw = true;\n\t\t}\n\t\tif (changes['yExtent']) {\n\t\t\tthis.chart.yExtent().overrideValue(changes['yExtent'].currentValue);\n\t\t\tredraw = true;\n\t\t}\n\t\tif (changes['xExtent']) {\n\t\t\tthis.chart.xExtent().overrideValue(changes['xExtent'].currentValue);\n\t\t\tredraw = true;\n\t\t}\n\t\tif (changes['duration']) {\n\t\t\tthis.chart.duration(changes['duration'].currentValue);\n\t\t}\n\n\t\tif (changes['fps']) {\n\t\t\tthis.chart.fps(changes['fps'].currentValue);\n\t\t}\n\t\tif (changes['delay']) {\n\t\t\tthis.chart.delay(changes['delay'].currentValue);\n\t\t\tredraw = true;\n\t\t}\n\t\tif (changes['interval']) {\n\t\t\tthis.chart.interval(changes['interval'].currentValue);\n\t\t\tredraw = true;\n\t\t}\n\n\t\tif (redraw) {\n\t\t\tthis.chart.redraw();\n\t\t}\n\t}\n\n}\n"]}